{% extends "xml_analyzer/base.html" %}

{% block content %}
<div class="container mt-5 text-center">
  <h2 class="mb-4">ğŸ” Rerun Failed Test Cases</h2>

  <form method="post">
    {% csrf_token %}
    <button type="submit" class="btn btn-lg mb-4" style="background-color: #006400; color: white;">
      ğŸ” Rerun
    </button>
  </form>  

  {% if result %}
    {% if result.error %}
      <div class="alert alert-danger">{{ result.error }}</div>
    {% else %}
      <div class="card border-success p-3">
        <h4 class="text-success">âœ… Rerun Summary</h4>
        <p><strong>Failed Before Rerun:</strong> {{ result.failed_before }}</p>
        <p><strong>Passed After Rerun:</strong> {{ result.passed_after_rerun }}</p>
        <p><strong>Still Failing:</strong> {{ result.still_failing }}</p>
        <p>
          ğŸ”´ Failed: {{ result.failed }},
          âš ï¸ Error: {{ result.error }},
          â­ï¸ Skipped: {{ result.skipped }}
        </p>
        <a href="{% url 'download_final_report' %}" class="btn btn-success mt-3">â¬‡ï¸ Download Updated XML</a>
      </div>
    {% endif %}
  {% endif %}
</div>
{% endblock %}
